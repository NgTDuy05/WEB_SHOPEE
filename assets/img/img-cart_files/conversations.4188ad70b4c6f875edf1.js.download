(self.miniJsonp=self.miniJsonp||[]).push([[4997],{55698:function(e,n,r){var t,o,c,u,i;e.exports=(t=r(82677),o=r(20573),c=r(53402),u=r(96961),i=r(29494),function(){"use strict";var e={383:function(e){e.exports=t},975:function(e){e.exports=o},511:function(e){e.exports=c},644:function(e){e.exports=u},855:function(e){e.exports=i}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var c=n[t]={exports:{}};return e[t](c,c.exports,r),c.exports}r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return function(){r.r(s),r.d(s,{allConversationIdsSelector:function(){return i},conversationBeenDeletedSelector:function(){return J},conversationDirectionSelector:function(){return g},conversationHttpStatusSelector:function(){return p},conversationIdsSelector:function(){return c},conversationLastMessageSelector:function(){return Ae},conversationsSelector:function(){return m},curConvsMessageSelector:function(){return Le},curMessagesRelatedSelector:function(){return Ee},currentBuyerIdSelector:function(){return E},currentBuyerSelector:function(){return L},currentBuyerShopIdSelector:function(){return N},currentBuyerShopSelector:function(){return U},currentConversationBuyerIdSelectors:function(){return j},currentConversationCanReadSelector:function(){return S},currentConversationIdSelector:function(){return v},currentConversationMaxOptionHideTimeSelectors:function(){return z},currentConversationSelector:function(){return T},currentConversationShopIdSelectors:function(){return P},currentConversationShopRegionSelectors:function(){return A},currentConversationShopSelectors:function(){return I},currentConversationStatusSelectors:function(){return w},currentConversationToNameSelector:function(){return K},currentConversationTranslationAccessSelector:function(){return Y},currentPendingOffersCountSelector:function(){return Z},currentSellerAccountIdSelector:function(){return re},currentShopIdSelector:function(){return B},degradeConversationIdsSelector:function(){return M},feedbackSelector:function(){return Fe},filterSelector:function(){return R},filteredConversationsSelector:function(){return O},getConversation:function(){return D},getConversationPendingOffersCountSelector:function(){return ee},getConversationShopId:function(){return k},getConversationShopRegion:function(){return ne},getConversations:function(){return x},getConvsMessagesRelatedSelector:function(){return Ie},getMessageSelector:function(){return Te},inlocationSelector:function(){return d},isNavigateToUnreadMessageSelector:function(){return $},keywordSelector:function(){return G},listsHashSelector:function(){return H},mediaListSelector:function(){return Ve},messagesRelatedMapSelector:function(){return Me},missedReadNoticeCountSelector:function(){return l},navigateToUnreadMessageIdSelector:function(){return W},noticesCountSelector:function(){return He},pinnedConversationIdsSelector:function(){return u},readRequestIdsSelector:function(){return a},reconnectFlagSelector:function(){return Ye},replyToMessageSelector:function(){return Ge},resultsSelector:function(){return V},reverseMessagesSelector:function(){return De},searchConversationHttpStatusSelector:function(){return F},selectVideoInfoByKey:function(){return Oe},selectVideoInfoKeyByVid:function(){return be},shopAccessSelector:function(){return Q},showFrozenTipSelector:function(){return ie},singleConversationMarkInfoSelector:function(){return ue},sortedConversationsSelector:function(){return b},totalConversationsCountSelector:function(){return oe},updateTimeNowSelector:function(){return f}});var e=r(383),n=r(975),t=r(511),o=r(644),c=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.conversationIds)||[]},u=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.pinnedConversationIds)||[]},i=(0,n.createSelector)(c,u,(function(e,n){var r=e.filter((function(e){return!n.includes(e)}));return n.concat(r)})),a=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.readRequestIds)||[]},l=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.missedReadNoticeCount)||0},d=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.inlocation)||!1},f=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.updateTimeNow)||"0"},v=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.currentConversationId)||null},S=function(e){var n;return(0,t.judgeUndefined)({defaultValue:!0,value:null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.currentConversationCanRead})},p=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.status)||""},g=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.direction)||""},m=(0,n.createSelector)(t.conversationEntitiesSelector,i,(function(n,r){return((0,e.denormalize)(r,[o.conversationSchema],{conversations:n})||[]).filter(Boolean)})),h=(0,n.createSelector)(m,v,(function(e,n){return e.filter((function(e){var r=e.id,t=e.unread_count;return e&&(t>0||r===n)}))})),_=(0,n.createSelector)(m,(function(e){return e.filter((function(e){return e.isPinned}))})),y=(0,n.createSelector)(m,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),C=(0,n.createSelector)(m,v,(function(e,n){return e.filter((function(e){var r=e.unreplied,t=e.id;return void 0===r||r||!r&&t===n}))})),M=(0,n.createSelector)(m,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),R=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.filter)||"All"},O=(0,n.createSelector)(R,m,h,_,y,C,(function(e,n,r,t,o,c){return{All:n,Unread:r,Pinned:t,Closed:o,Unreplied:c}[e]})),b=(0,n.createSelector)(O,u,t.waitingTimeFilterSelector,R,(function(e,n,r,t){var o=e.filter((function(e){return!n.includes(e.id)})),c=e.filter((function(e){return n.includes(e.id)}));return o.sort((function(e,n){return parseInt(n.latest_message_id)-parseInt(e.latest_message_id)})),c.concat(o).filter((function(e){return void 0===e.faking}))})),T=(0,n.createSelector)(m,v,t.isSubAccountSelector,d,t.userEntitiesSelector,t.conversationEntitiesSelector,(function(n,r,t,c,u,i){var s=n.find((function(e){return e.id===r}))||{};if(c&&!s.id&&(s=(0,e.denormalize)(r,o.conversationSchema,{conversations:i})||{}),!t&&s.lack){var a=s.to_id,l=(0,e.denormalize)(a,o.userSchema,{users:u})||{},d={to_shop_id:l.shop_id,to_status:l.status,to_name:l.name||"-",to_avatar:l.avatar};return Object.assign(s,d)}return s})),E=(0,n.createSelector)(T,(function(e){return(e||{}).to_id||null})),I=(0,n.createSelector)(T,t.shopsEntitiesSelector,(function(n,r){return(0,e.denormalize)(n.shop_id,o.shopSchema,{shops:r})||{}})),A=(0,n.createSelector)(I,(function(e){return(null==e?void 0:e.country)||"SG"})),P=(0,n.createSelector)(T,(function(e){return e.shop_id})),j=(0,n.createSelector)(T,(function(e){return e.to_id})),w=(0,n.createSelector)(T,(function(e){return e.status})),z=(0,n.createSelector)(T,(function(e){return e.max_general_option_hide_time})),D=function(r){return(0,n.createSelector)(t.conversationEntitiesSelector,(function(n){return(0,e.denormalize)(r,o.conversationSchema,{conversations:n})||{}}))},k=function(e){return(0,n.createSelector)(D(e),(function(e){return e.shop_id}))},x=function(e){return(0,n.createSelector)(m,(function(n){return e.map((function(e){return n.find((function(n){return n.id===e}))})).filter(Boolean)}))},B=(0,n.createSelector)(T,(function(e){return(e||{}).shop_id||null})),L=(0,n.createSelector)(t.userEntitiesSelector,T,(function(n,r){return r?(0,e.denormalize)(r.to_id,o.userSchema,{users:n}):{}})),N=(0,n.createSelector)(T,(function(e){return(e||{}).to_shop_id||null})),U=(0,n.createSelector)(N,t.shopsEntitiesSelector,(function(n,r){return(0,e.denormalize)(n,o.shopSchema,{shops:r})||{}})),G=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.keyword)||""},V=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.results)||[]},F=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.searchStatus)||""},Y=(0,n.createSelector)(T,(function(e){return e.translationAccess})),H=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.listsHash)||{}},J=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.conversationBeenDeleted)||!1},K=(0,n.createSelector)(T,(function(e){return(e||{}).to_name})),q={hasSCAccess:!0,hasEditOrderAccess:!0,hasViewOrderAccess:!0,hasViewProductAccess:!0,hasEditVoucherAccess:!0,hasViewVoucherAccess:!0,hasViewRrOrderAccess:!0,hasOrderDetailAccess:!0},Q=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.access)||q},$=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.isNavigateToUnreadMessage)||!1},W=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.navigateToUnreadMessageId)||""},X=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.pendingOffersCount)||{}},Z=(0,n.createSelector)(T,X,(function(e,n){var r=e.shop_id,t=e.to_id;return n["".concat(r,"_").concat(t)]||0})),ee=function(e){return(0,n.createSelector)(D(e),X,(function(e,n){var r=e.shop_id,t=e.to_id;return n["".concat(r,"_").concat(t)]||0}))},ne=function(r){return(0,n.createSelector)(k(r),t.shopsEntitiesSelector,(function(n,r){var t=(0,e.denormalize)(n,o.shopSchema,{shops:r})||{};return(null==t?void 0:t.country)||"SG"}))},re=(0,n.createSelector)(t.isSubAccountSelector,t.currentUserIdSelector,I,(function(e,n,r){return e?r.user_id:n})),te={unrepliedCount:0,duesoonCount:0,overdueCount:0,pinnedCount:0,unreadCount:0},oe=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.totalConversationsCount)||te},ce=function(e){var n;return(null==e||null===(n=e.conversationReducer)||void 0===n?void 0:n.conversationMark)||{}},ue=function(e){return(0,n.createSelector)(ce,(function(n){return n[e]}))},ie=(0,n.createSelector)(t.shopTranslationSettingsSelector,t.isSubAccountSelector,B,t.currentUserShopIdSelector,(function(e,n,r,t){return"frozen"===(e[n?r:t]||{}).userStatus}));function se(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ae(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function le(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return ae(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var de=r(855);function fe(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ve(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?fe(Object(r),!0).forEach((function(n){se(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Se,pe=de.MessageTypes.MSG_TYPE_OFFER,ge=de.MessageTypes.MSG_TYPE_ORDER,me=de.MessageTypes.MSG_TYPE_PRODUCT,he=de.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,_e=de.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,ye=de.MessageTypes.MSG_TYPE_RATE_CARD,Ce=[ge,me],Me=(0,n.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),Re=function(e){var n;return(null===(n=e.messageReducer)||void 0===n?void 0:n.videoMap)||{}},Oe=function(e){return(0,n.createSelector)(Re,(function(n){return JSON.parse(JSON.stringify(n[e]||{}))}))},be=function(e){return(0,n.createSelector)(Re,(function(n){return Object.keys(n).find((function(r){return n[r].vid===e}))}))},Te=function(r){return(0,n.createSelector)(t.messageEntitiesSelector,(function(n){return(0,e.denormalize)(r,o.messageSchema,{messages:n})}))},Ee=(0,n.createSelector)(v,Me,(function(e,n){return n[e]||{all:[]}})),Ie=function(e){return(0,n.createSelector)(Me,(function(n){return n[e]||{all:[],sending:[],failed:[]}}))},Ae=(Se=function(e){return(0,n.createSelector)(Ie(e),D(e),t.messageEntitiesSelector,(function(e,n,r){return(0,t.getConversationLastMessage)(e,n,r)}))},function(){var e=Array.prototype.slice.call(arguments);return Se.memoize=Se.memoize||{},e in Se.memoize?Se.memoize[e]:Se.memoize[e]=Se.apply(this,e)}),Pe=(0,n.createSelector)(Ee,(function(e){var n=le(e.all||[]);return e.securityTipsMessageId&&n.push(e.securityTipsMessageId),n})),je=(0,n.createSelector)(Ee,(function(e){return e.sending||[]})),we=(0,n.createSelector)(Ee,(function(e){return e.failed||[]})),ze=(0,n.createSelector)(t.messageEntitiesSelector,Pe,(function(n,r){return((0,e.denormalize)(r,[o.messageSchema],{messages:n})||[]).filter(Boolean)})),De=(0,n.createSelector)(ze,(function(e){return e.reverse()})),ke=(0,n.createSelector)(T,De,(function(e,n){return e?n.filter(Boolean).reduce((function(e,n){var r=n.type,t=n.source_type,o=n.source_content,c=n.content;if(!t||r===pe||[-1,0].includes(o["".concat(t,"_id")]))return e;if(Ce.includes(r)&&o){var u="".concat(r,"_id");if(c[u]===o[u])return e}var i=e.lastSourceMessage,s=e.sourceList;if(!s.length)return{sourceList:s.concat(n),lastSourceMessage:n};if(t===me){var a=null==o?void 0:o.product_id,l=i.source_content&&i.source_content.product_id;if(!a||l===a)return e}else if(t===ge){var d=null==o?void 0:o.order_id,f=i.source_content&&i.source_content.order_id;if(!d||[-1,0,f].includes(d))return e}return{sourceList:s.concat(n),lastSourceMessage:n}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),xe=(0,n.createSelector)(ke,(function(e){return e.map((function(e){return e.id}))})),Be=(0,n.createSelector)(t.entitiesSelector,ze,(function(n,r){var t=r.filter((function(e){return e&&e.type===pe})).map((function(e){return e.content.offer_id}));return(0,e.denormalize)(t,[o.offerSchema],n)})),Le=(0,n.createSelector)(De,xe,je,we,T,t.rateCardEntitiesSelector,Be,(function(e,n,r,t,o,c,u){return o?e.filter((function(e){if(!e)return!1;var n=e.content,r=e.type;return!(![he,_e].includes(r)&&(!n||n&&0===Object.keys(n).length))})).map((function(e){var o=r.includes(e.id)?de.MessageSendStatus.SENDING:t.includes(e.id)?de.MessageSendStatus.FAILED:e.send_status?de.MessageSendStatus.SUCCEED:null,i=n.includes(e.id),s=Object.assign({},e,{send_status:o,hasMessageSource:i}),a=s,l=a.type,d=a.content,f=void 0===d?{}:d,v=a.message_option;switch(l){case pe:var S=u.find((function(e){return e&&e.id===f.offer_id}));s=Object.assign({},s,{textContent:S});break;case ye:var p=c[f.card_id];p&&(s=Object.assign({},s,{textContent:p}))}return(0,de.hasTargetMessageOption)(v,de.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(s=ve(ve({},s),{},{send_status:de.MessageSendStatus.FAILED,errorCode:de.MessageErrorCode.BLACKLIST})),s})):[]})),Ne=(0,n.createSelector)((function(e){var n;return null==e||null===(n=e.messageReducer)||void 0===n?void 0:n.reply}),(function(e){return e?e.toMessageId:{}})),Ue=(0,n.createSelector)(v,Ne,(function(e,n){return n[e]||""})),Ge=(0,n.createSelector)(Ue,t.messageEntitiesSelector,(function(n,r){return(0,e.denormalize)(n,o.messageSchema,{messages:r})})),Ve=(0,n.createSelector)(v,(function(e){var n;return(null===(n=e.mediaPreviewerReducer)||void 0===n?void 0:n.mediaMap)||{}}),(function(e,n){return n[e]||[]})),Fe=function(e){var n;return(null==e||null===(n=e.socketReducer)||void 0===n?void 0:n.feedback)||void 0},Ye=function(e){var n;return(null==e||null===(n=e.socketReducer)||void 0===n?void 0:n.reconnectFlag)||!1},He=function(e){var n;return(null==e||null===(n=e.socketReducer)||void 0===n?void 0:n.noticesCount)||0}}(),s}())},66633:function(e,n,r){"use strict";e.exports=r(55698)}}]);